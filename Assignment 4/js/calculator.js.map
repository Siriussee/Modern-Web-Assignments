{"version":3,"sources":["calculator.js"],"names":["ln","a","math","eval","degrees","lev","calculator","data","console","log","replace","result","length","exception","alert","config","number","import","$","document","isRes","init","numOfLeft","fom","textContent","funcName","opr","reset","callback","removeClass","addClass","undefined","setTimeout","res","getElementById","fade","click","isNaN","addFunc","substr","addOperator","autoFill","this"],"mappings":"aAKY,SAAZA,GAAAC,GAKE,OAAOC,KAAKC,KAAK,OAASF,EAAI,YAC/B,SAAAG,QAAAH,GAGC,OAAOC,KAAKC,KAAKF,EAAI,OACtB,SAAAI,IAAAJ,GAGC,OAAOC,KAAKC,KAAKF,EAAI,KAUvB,SAASK,WAAWC,GAApB,GACEC,QAAQC,IAAIF,GADLD,WAATC,EACEC,MAAQC,UAENF,EAAAA,EAAOG,QAAP,KAAA,MACD,IACDH,IAAAA,EAAYG,KAAQP,KAAbI,GACP,OAAGI,EAAA,IAAAC,OAAA,GACGD,EAAST,YAAb,IAAA,GAMIW,EAAU,GAEd,MAAAA,GAEH,OADEC,MAAA,8DACF,WA1CDZ,KAAAa,QAGEC,OAAQ,cAaTd,KAAAe,QAGCjB,GAAIA,GADNE,QAAAE,QACEJ,IAAIA,MA2BJkB,EAAAC,UAAIC,MAAQ,WAMX,SAAAC,IADCC,EAAY,EAKVC,SAAIC,IADN,KAAAF,EAAA,IAAAA,EAEDC,EAAAC,aAAA,IAGC,SAAEF,EAAFG,KACAF,EACDA,EAAAC,aAAAC,EAAA,IAGCF,SAAIC,EAAeE,GACpBH,EAAAC,aAAAE,EAMCR,SAAES,EAAFC,GACAV,EAAE,aAAWW,YAAY,aAAaA,YAAY,MAAMC,SAAS,MACjEZ,EAAA,WAAIU,YAAJ,aACaA,YAAX,MAAAE,SAAA,WACHC,GAAAH,GADGI,WAAWJ,EAAU,IA5BzB,IAAIL,EAAMJ,EACRc,GAAMd,EADJI,EAAMJ,SAASe,eAAe,YAGlCD,EAAAd,SAAgBe,eAAA,UAmBhBhB,EAAE,WAAFY,SAAeA,MAAfA,SAA8BA,aAA9BZ,EAAE,aAAaY,SAAS,MAAMA,SAAS,aAWrCZ,IAAEiB,EAAA,WAFJjB,EAAA,aAAAW,YAAA,MAAAC,SAAA,aAAAA,SAAA,MAEEZ,EAAE,WAAWW,YAAY,MAAMC,SAAS,aAAaA,SAAS,OAK9DZ,EAAA,WAASkB,MAAKZ,WAEV,GADFG,OAAGP,GACDiB,MAAGJ,KAAIT,aAWLH,OAPFD,KACDa,EAAAT,YAAA,WACDD,EAAQC,YAAKA,EAETD,EAAAC,YAAAS,EAAAT,YACFJ,GAAK,GAEHC,KAAAA,aACA,IAAA,MACF,MACE,IAAEC,KACFC,EAAIC,YAAJ,GACAH,IACF,MACE,IAAA,MACEC,EACAC,EAAAA,aAAA,IACD,MACD,IAAA,IACGD,EAAL,MACKC,EAEHA,EAAAC,aAAA,KAEAc,MACA,IAAA,MACF,IAAKf,EAAAC,cACHc,EAAAA,YAAAf,EAAAC,YAAAe,OAAA,EAAAhB,EAAAC,YAAAZ,OAAA,IACA,MACF,IAAK,KACL0B,EAAK,OACL,MACEA,IAAAA,MACAA,EAAA,WACF,MACEE,IAAAA,MAAAA,IAAA,MAAA,IAAA,MACA,IAAA,OAAA,IAAA,OAAA,IAAA,OACF,IAAK,KAAL,IAAA,MACEjB,EAAIC,KAAAA,aACJ,MACF,IAAK,MACHD,EAAIC,KACJ,MACF,IAAK,IACHiB,EAAAA,aAAAA,IACApB,MACAY,IAAAA,IACAN,EAAAA,aAAA,IACAP,MACA,IAAA,IALAqB,IAOFpB,IACEmB,EAAAA,YAAiBhB,WAAjBD,EAAAC,aACAG,EAAAQ,GAnDJf,GAAA,EARF,MAgEIG,QACAH,EAAAsB,KAAAlB,kBA1GRJ,IAyGQG,EAAIC,YAAc,GAClBJ,GAAQ,GAEVG,EAAIC,aAAekB,KAAKlB","file":"calculator.js","sourcesContent":["/*jshint esversion: 6*/\n/*High Accuracy Algorithm Supported*/\n/*Scientific Calculation Supported*/\n/*Non-server version*/\n\nmath.config({\n  number: 'BigNumber'\n});\n\nfunction ln(a) {\n  return math.eval(\"log(\" + a + \")/log(e)\");\n}\n\nfunction degrees(a) {\n  return math.eval(a + \"deg\");\n}\n\nfunction lev(a){\n  return math.eval(a + \"!\");\n}\n\nmath.import({\n  ln: ln,\n  degrees: degrees,\n  lev: lev\n});// config of mathjs\n\n\nfunction calculator(data){\n  console.log(data);\n  if(data == \"INVALID\"){\n    return \"INVALID\";\n  }\n  data = data.replace(/π/g, \"pi\");\n  try{\n    let result = math.eval(data);\n    if((result + \"\").length > 17)\n      return result.toPrecision(16) + \"\";\n    else\n      return result + \"\";\n  }\n  catch(exception){\n    alert('What you typed in is not a valid formula, please try again');\n    return \"INVALID\";\n  }\n}\n\n$(document).ready(function () {\n  let numOfLeft = 0;\n  let isRes = false;\n  let fom = document.getElementById('equation'), \n    res = document.getElementById('result');\n\n  function init() {\n    numOfLeft = 0;\n  }\n\n  function autoFill(){\n    for(;numOfLeft > 0; --numOfLeft)\n      fom.textContent += \")\";\n  }\n\n  function addFunc(funcName){\n    ++numOfLeft;\n    fom.textContent += funcName + \"(\";\n  }\n\n  function addOperator(opr){\n    fom.textContent += opr;\n  }\n\n  $('#result').addClass('s0').addClass('animation');\n  $('#equation').addClass('s1').addClass('animation');\n\n  function reset(callback) {\n    $('#equation').removeClass('animation').removeClass('s0').addClass('s1');\n    $('#result').removeClass('animation').removeClass('s1').addClass('s0');\n    if (callback != undefined)\n      setTimeout(callback, 50);\n  }\n\n  let fade = function () {\n    $('#equation').removeClass('s1').addClass('animation').addClass('s0');\n    $('#result').removeClass('s0').addClass('animation').addClass('s1');\n  };\n\n  $('.button').click(function () {\n    reset(undefined);\n    if(isNaN(this.textContent)){\n      if(isRes){\n        if(res.textContent = \"INVALID\")\n          fom.textContent = 0;\n        else\n          fom.textContent = res.textContent;\n        isRes = false;\n      }\n      switch (this.textContent) {\n        case \"---\":\n          break;\n        case 'CE':\n          fom.textContent = \"\";\n          init();\n          break;\n        case '(':\n          ++numOfLeft;\n          fom.textContent += \"(\";\n          break;\n        case ')':\n          if(numOfLeft > 0){\n            --numOfLeft;\n            fom.textContent += \")\";\n          }\n          break;\n        case 'Del':\n          if(fom.textContent != \"\")\n            fom.textContent = fom.textContent.substr(0, fom.textContent.length - 1);\n          break;\n        case \"n!\":\n          addFunc(\"lev\");\n          break;\n        case \"deg\":\n          addFunc(\"degrees\");\n          break;\n        case \"sin\": case \"cos\": case \"tan\":\n        case \"asin\": case \"acos\": case \"atan\":\n        case \"ln\": case \"log\":\n          addFunc(this.textContent);\n          break;\n        case \"x^y\":\n          addOperator(\"^\");\n          break;\n        case \"π\":\n          fom.textContent += \"π\";\n          break;\n        case \"e\":\n          fom.textContent += \"e\";\n          break;\n        case \"=\":\n          autoFill();\n          init();\n          res.textContent = calculator(fom.textContent);\n          reset(fade);\n          isRes = true;\n          break;\n\n        default:\n          addOperator(this.textContent);\n          break;\n      }\n    }\n    else{\n      if(isRes){\n        fom.textContent = \"\";\n        isRes = false;\n      }\n      fom.textContent += this.textContent;\n    }\n  });\n});"]}